---
title: "Microbenchmarks of FSelectoRcpp and FSelector"
author: Marcin Kosinski
output:
  html_document:
    mathjax:  default
    fig_caption:  true
    toc: true
    section_numbering: true
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{Microbenchmarks of FSelectoRcpp and FSelector}
---

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(
    comment = "",
    fig.width = 12, 
    message = FALSE,
    warning = FALSE,
    tidy.opts = list(
        keep.blank.line = TRUE,
        width.cutoff = 150
        ),
    options(width = 150),
    eval = FALSE
)
```

```{r}
#install.packages('microbenchmark')
library(microbenchmark)

library(FSelectorRcpp)
library(FSelector)

```

# Comparisons on RTCGA data

## About The Cancer Genome Atlas

> The Cancer Genome Atlas (TCGA) is a comprehensive and coordinated effort to accelerate our understanding of the molecular basis of cancer through the application of genome analysis technologies, including large-scale genome sequencing - [http://cancergenome.nih.gov/](http://cancergenome.nih.gov/). 

[Our team](https://github.com/orgs/RTCGA/people) converted selected datasets from this study into few separate packages that are hosted on Bioconductor. These R packages make selected datasets easier to access and manage. Data sets in RTCGA packages are large and cover complex relations between clinical outcomes and genetic background.

To use RTCGA install package with instructions from it's [Bioconductor home page](https://www.bioconductor.org/packages/RTCGA/)

```{r, eval = FALSE}
## try http:// if https:// URLs are not supported
source("https://bioconductor.org/biocLite.R")
biocLite("RTCGA")
```


### Dependent variable

Specifies whether a sample came from tumour or healthy tissue. It is denoted by 14th sign in `bcr_patiend_barcode` variable in `BRCA.rnaseq` dataset that containt RNA-Seq genes' expressions for patients suffering from Breast Cancer.

```{r}
library(RTCGA.rnaseq)
BRCA.rnaseq$bcr_patient_barcode <- 
   substr(BRCA.rnaseq$bcr_patient_barcode, 14, 14)

```

### More

- [RTCGA Quick Guide](http://r-addict.com/2016/05/04/RTCGA-Quick-Guide.html)
- [RTCGA Website](http://rtcga.github.io/RTCGA/)

## Information Gain algorithm


```{r}
microbenchmark(
  {information_gain(y = BRCA.rnaseq[, 1],
                 x = BRCA.rnaseq[, -1]) -> FSelectorRcpp.weights},
  {information_gain(y = BRCA.rnaseq[, 1], threads = 2,
                 x = BRCA.rnaseq[, -1]) -> FSelectorRcpp2.weights},
  {information_gain(y = BRCA.rnaseq[, 1], threads = 4,
                 x = BRCA.rnaseq[, -1]) -> FSelectorRcpp4.weights},
  {information_gain(y = BRCA.rnaseq[, 1], threads = 6,
                 x = BRCA.rnaseq[, -1]) -> FSelectorRcpp6.weights},
  {information.gain(bcr_patient_barcode~.,
                 BRCA.rnaseq[, 1:10000]) -> FSelector.weights}
)
```

